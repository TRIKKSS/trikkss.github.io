<!doctype html><html lang=en dir=auto><head><meta charset=utf-8><meta http-equiv=X-UA-Compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>Protonic Vault write up | TRIKKSS Blog</title>
<meta name=keywords content="Reverse engineering,Javascript,Asar"><meta name=description content="Write up of the Protonic Vault challenge from the 10k Root-Me CTF."><meta name=author content="TRIKKSS"><link rel=canonical href=https://trikkss.github.io/posts/protonic-vault-wu/><link crossorigin=anonymous href=/assets/css/stylesheet.css rel="preload stylesheet" as=style><script defer crossorigin=anonymous src=/assets/js/highlight.js onload=hljs.initHighlightingOnLoad()></script><link rel=icon href=https://trikkss.github.io/img/pfp.png><link rel=icon type=image/png sizes=16x16 href=https://trikkss.github.io/img/pfp.png><link rel=icon type=image/png sizes=32x32 href=https://trikkss.github.io/img/pfp.png><link rel=apple-touch-icon href=https://trikkss.github.io/img/pfp.png><link rel=mask-icon href=https://trikkss.github.io/img/pfp.png><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><link rel=alternate hreflang=en href=https://trikkss.github.io/posts/protonic-vault-wu/><noscript><style>#theme-toggle,.top-link{display:none}</style></noscript><meta property="og:title" content="Protonic Vault write up"><meta property="og:description" content="Write up of the Protonic Vault challenge from the 10k Root-Me CTF."><meta property="og:type" content="article"><meta property="og:url" content="https://trikkss.github.io/posts/protonic-vault-wu/"><meta property="og:image" content="https://trikkss.github.io/img/pfp.png"><meta property="article:section" content="posts"><meta property="article:published_time" content="2022-10-25T00:00:00+00:00"><meta property="article:modified_time" content="2022-10-25T00:00:00+00:00"><meta property="og:site_name" content="TRIKKSS Blog"><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content="https://trikkss.github.io/img/pfp.png"><meta name=twitter:title content="Protonic Vault write up"><meta name=twitter:description content="Write up of the Protonic Vault challenge from the 10k Root-Me CTF."><script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Posts","item":"https://trikkss.github.io/posts/"},{"@type":"ListItem","position":2,"name":"Protonic Vault write up","item":"https://trikkss.github.io/posts/protonic-vault-wu/"}]}</script><script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","headline":"Protonic Vault write up","name":"Protonic Vault write up","description":"Write up of the Protonic Vault challenge from the 10k Root-Me CTF.","keywords":["Reverse engineering","Javascript","Asar"],"articleBody":"PROTONIC VAULT Hello, today i will explain how i solved the Protonic Vault challenge from the Root-Me capture the flag.\nChallenge content user@debian:~/protonic_vault$ tree protonic-vault\rprotonic-vault\r├── chrome_100_percent.pak\r├── chrome_200_percent.pak\r├── d3dcompiler_47.dll\r├── ffmpeg.dll\r├── icudtl.dat\r├── libEGL.dll\r├── libGLESv2.dll\r├── LICENSE\r├── LICENSES.chromium.html\r├── locales\r│ ├── af.pak\r│ ├── am.pak\r│ ├── ar.pak\r│ ├── bg.pak\r│ ├── bn.pak\r│ ├── ca.pak\r│ ├── cs.pak\r│ ├── da.pak\r[...]\r│ ├── te.pak\r│ ├── th.pak\r│ ├── tr.pak\r│ ├── uk.pak\r│ ├── ur.pak\r│ ├── vi.pak\r│ ├── zh-CN.pak\r│ └── zh-TW.pak\r├── protonic-vault.exe\r├── resources\r│ └── app.asar\r├── resources.pak\r├── snapshot_blob.bin\r├── v8_context_snapshot.bin\r├── version\r├── vk_swiftshader.dll\r├── vk_swiftshader_icd.json\r└── vulkan-1.dll Let’s uncompress the protonic-vault.zip file given for this challenge and execute protonic-vault.exe.\nThe application asks a password. Obviously, we don’t know it. I tried to reverse engineer this executable but it was hard. So i decided to look at the other files. The resources/app.asar file seemed interesting. After some google research I deduced that this application was an electron application. We can found the official github of Asar here\nSo let’s decompile this app.asar file !\nAsar decompilation We must first install asar. We can do it with this command.\nnpm install --engine-strict @electron/asar and now let’s extract this archive.\nuser@debian:~/protonic_vault/protonic-vault/resources$ asar --help\rUsage: asar [options] [command]\rManipulate asar archive files\rOptions:\r-V, --version output the version number\r-h, --help display help for command\rCommands:\rpack|p [options] create asar archive\rlist|l [options] list files of asar archive\rextract-file|ef extract one file from archive\rextract|e extract archive\r*\rhelp [command] display help for command\ruser@debian:~/protonic_vault/protonic-vault/resources$ asar extract app.asar app_extracted\ruser@debian:~/protonic_vault/protonic-vault/resources$ ls\rapp.asar app_extracted\ruser@debian:~/protonic_vault/protonic-vault/resources$ ls app_extracted/\rimg index.html node_modules package.json src styles Nice ! Here is the extracted the source code of our application. The src/ folder seems interesting.\nsrc/\r├── main.js\r├── preload.js\r├── renderer.js\r└── window.jsc In the renderer.js file we can recognize our login form.\nasync function setupHandler() { let truePassword = await window.electronAPI.getPassword() document.getElementById(\"passForm\").addEventListener(\"submit\", async e =\u003e { e.preventDefault() const passwordInput = document.getElementById(\"password\") const password = passwordInput.value const resultDiv = document.getElementById(\"result\") resultDiv.hidden = false if (password === truePassword) { resultDiv.innerHTML = `Welcome, dear master!Flag: ${await window.electronAPI.getFlag()}` resultDiv.className = \"notification is-success\" } else { resultDiv.textContent = \"You're wrong!!\" resultDiv.className = \"notification is-danger\" } }) } setupHandler() The method window.electronAPI.getPassword() ask for the password. It means that our password is located in the window.jsc file, but this file is compiled into v8 bytecode.\nApplication patching I was very lazy to decompile it so I had another idea. If we patch the renderer.js file and compile it again into an other app.asar will this work? I tried. This is our new renderer.js file.\nasync function setupHandler() { let truePassword = await window.electronAPI.getPassword() document.getElementById(\"passForm\").addEventListener(\"submit\", async e =\u003e { e.preventDefault() const passwordInput = document.getElementById(\"password\") const password = passwordInput.value const resultDiv = document.getElementById(\"result\") resultDiv.hidden = false resultDiv.innerHTML = `Welcome, dear master!Flag: ${await window.electronAPI.getFl\u003e resultDiv.className = \"notification is-success\" }) } setupHandler() I just removed the condition. We compile again our patched application.\nuser@debian:~/protonic_vault/protonic-vault/resources$ asar pack app_extracted/ new_app.asar and we replace the old app.asar with our new file.\nFlag Then we executed again the protonic-vault.exe, click on submit with any password and it works ! we are login and we can get the flag.\nFlag : RM{V8_byt3c0d3_1s_n0t_3n0ugh}\nGreetings Thanks to Root-Me and Elf for this challenge. I am very glad about it being interesting at all because it was the first time I reverse engineer this type of application.\n","wordCount":"587","inLanguage":"en","datePublished":"2022-10-25T00:00:00Z","dateModified":"2022-10-25T00:00:00Z","author":{"@type":"Person","name":"TRIKKSS"},"mainEntityOfPage":{"@type":"WebPage","@id":"https://trikkss.github.io/posts/protonic-vault-wu/"},"publisher":{"@type":"Organization","name":"TRIKKSS Blog","logo":{"@type":"ImageObject","url":"https://trikkss.github.io/img/pfp.png"}}}</script></head><body class=dark id=top><script>localStorage.getItem("pref-theme")==="light"&&document.body.classList.remove("dark")</script><header class=header><nav class=nav><div class=logo><a href=https://trikkss.github.io/ accesskey=h title="Home (Alt + H)"><img src=https://trikkss.github.io/img/pfp.png alt aria-label=logo height=35>Home</a><div class=logo-switches><button id=theme-toggle accesskey=t title="(Alt + T)"><svg id="moon" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg><svg id="sun" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></button><ul class=lang-switch><li>|</li></ul></div></div><ul id=menu><li><a href=https://trikkss.github.io/posts/ title=Posts><span>Posts</span></a></li><li><a href=https://trikkss.github.io/tags/ title=Tags><span>Tags</span></a></li></ul></nav></header><main class=main><article class=post-single><header class=post-header><div class=breadcrumbs><a href=https://trikkss.github.io/>Home</a>&nbsp;»&nbsp;<a href=https://trikkss.github.io/posts/>Posts</a></div><h1 class=post-title>Protonic Vault write up</h1><div class=post-meta><span title='2022-10-25 00:00:00 +0000 UTC'>October 25, 2022</span>&nbsp;·&nbsp;3 min&nbsp;·&nbsp;587 words&nbsp;·&nbsp;TRIKKSS</div></header><div class=toc><details open><summary accesskey=c title="(Alt + C)"><span class=details>Table of Contents</span></summary><div class=inner><nav id=TableOfContents><ul><li><a href=#challenge-content>Challenge content</a></li><li><a href=#asar-decompilation>Asar decompilation</a></li><li><a href=#application-patching>Application patching</a></li><li><a href=#flag>Flag</a></li><li><a href=#greetings>Greetings</a></li></ul></nav></div></details></div><div class=post-content><h1 id=protonic-vault>PROTONIC VAULT<a hidden class=anchor aria-hidden=true href=#protonic-vault>#</a></h1><p><em>Hello, today i will explain how i solved the Protonic Vault challenge from the Root-Me capture the flag.</em></p><h2 id=challenge-content>Challenge content<a hidden class=anchor aria-hidden=true href=#challenge-content>#</a></h2><p><img loading=lazy src=/img/posts/Protonic-Vault-WU/challenge.png alt="challenge name and description"></p><pre tabindex=0><code>user@debian:~/protonic_vault$ tree protonic-vault
protonic-vault
├── chrome_100_percent.pak
├── chrome_200_percent.pak
├── d3dcompiler_47.dll
├── ffmpeg.dll
├── icudtl.dat
├── libEGL.dll
├── libGLESv2.dll
├── LICENSE
├── LICENSES.chromium.html
├── locales
│   ├── af.pak
│   ├── am.pak
│   ├── ar.pak
│   ├── bg.pak
│   ├── bn.pak
│   ├── ca.pak
│   ├── cs.pak
│   ├── da.pak
[...]
│   ├── te.pak
│   ├── th.pak
│   ├── tr.pak
│   ├── uk.pak
│   ├── ur.pak
│   ├── vi.pak
│   ├── zh-CN.pak
│   └── zh-TW.pak
├── protonic-vault.exe
├── resources
│   └── app.asar
├── resources.pak
├── snapshot_blob.bin
├── v8_context_snapshot.bin
├── version
├── vk_swiftshader.dll
├── vk_swiftshader_icd.json
└── vulkan-1.dll
</code></pre><p>Let&rsquo;s uncompress the protonic-vault.zip file given for this challenge and execute protonic-vault.exe.</p><p><img loading=lazy src=/img/posts/Protonic-Vault-WU/application.png alt="application look"></p><p>The application asks a password. Obviously, we don&rsquo;t know it. I tried to reverse engineer this executable but it was hard. So i decided to look at the other files. The resources/app.asar file seemed interesting. After some google research I deduced that this application was an electron application. We can found the official github of Asar <a href=https://github.com/electron/asar>here</a></p><p>So let&rsquo;s decompile this app.asar file !</p><h2 id=asar-decompilation>Asar decompilation<a hidden class=anchor aria-hidden=true href=#asar-decompilation>#</a></h2><p>We must first install asar. We can do it with this command.</p><pre tabindex=0><code>npm install --engine-strict @electron/asar
</code></pre><p>and now let&rsquo;s extract this archive.</p><pre tabindex=0><code>user@debian:~/protonic_vault/protonic-vault/resources$ asar --help
Usage: asar [options] [command]

Manipulate asar archive files

Options:
  -V, --version                         output the version number
  -h, --help                            display help for command

Commands:
  pack|p [options] &lt;dir&gt; &lt;output&gt;       create asar archive
  list|l [options] &lt;archive&gt;            list files of asar archive
  extract-file|ef &lt;archive&gt; &lt;filename&gt;  extract one file from archive
  extract|e &lt;archive&gt; &lt;dest&gt;            extract archive
  *
  help [command]                        display help for command
user@debian:~/protonic_vault/protonic-vault/resources$ asar extract app.asar app_extracted
user@debian:~/protonic_vault/protonic-vault/resources$ ls
app.asar  app_extracted
user@debian:~/protonic_vault/protonic-vault/resources$ ls app_extracted/
img  index.html  node_modules  package.json  src  styles
</code></pre><p>Nice ! Here is the extracted the source code of our application. The src/ folder seems interesting.</p><pre tabindex=0><code>src/
├── main.js
├── preload.js
├── renderer.js
└── window.jsc
</code></pre><p>In the renderer.js file we can recognize our login form.</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-js data-lang=js><span class=line><span class=cl><span class=kr>async</span> <span class=kd>function</span> <span class=nx>setupHandler</span><span class=p>()</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=kd>let</span> <span class=nx>truePassword</span> <span class=o>=</span> <span class=kr>await</span> <span class=nb>window</span><span class=p>.</span><span class=nx>electronAPI</span><span class=p>.</span><span class=nx>getPassword</span><span class=p>()</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=nb>document</span><span class=p>.</span><span class=nx>getElementById</span><span class=p>(</span><span class=s2>&#34;passForm&#34;</span><span class=p>).</span><span class=nx>addEventListener</span><span class=p>(</span><span class=s2>&#34;submit&#34;</span><span class=p>,</span> <span class=kr>async</span> <span class=nx>e</span> <span class=p>=&gt;</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=nx>e</span><span class=p>.</span><span class=nx>preventDefault</span><span class=p>()</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>        <span class=kr>const</span> <span class=nx>passwordInput</span> <span class=o>=</span> <span class=nb>document</span><span class=p>.</span><span class=nx>getElementById</span><span class=p>(</span><span class=s2>&#34;password&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        <span class=kr>const</span> <span class=nx>password</span> <span class=o>=</span> <span class=nx>passwordInput</span><span class=p>.</span><span class=nx>value</span>
</span></span><span class=line><span class=cl>        <span class=kr>const</span> <span class=nx>resultDiv</span> <span class=o>=</span> <span class=nb>document</span><span class=p>.</span><span class=nx>getElementById</span><span class=p>(</span><span class=s2>&#34;result&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>        <span class=nx>resultDiv</span><span class=p>.</span><span class=nx>hidden</span> <span class=o>=</span> <span class=kc>false</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>        <span class=k>if</span> <span class=p>(</span><span class=nx>password</span> <span class=o>===</span> <span class=nx>truePassword</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>            <span class=nx>resultDiv</span><span class=p>.</span><span class=nx>innerHTML</span> <span class=o>=</span> <span class=sb>`Welcome, dear master!&lt;br/&gt;Flag: </span><span class=si>${</span><span class=kr>await</span> <span class=nb>window</span><span class=p>.</span><span class=nx>electronAPI</span><span class=p>.</span><span class=nx>getFlag</span><span class=p>()</span><span class=si>}</span><span class=sb>`</span>
</span></span><span class=line><span class=cl>            <span class=nx>resultDiv</span><span class=p>.</span><span class=nx>className</span> <span class=o>=</span> <span class=s2>&#34;notification is-success&#34;</span>
</span></span><span class=line><span class=cl>        <span class=p>}</span>
</span></span><span class=line><span class=cl>        <span class=k>else</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>            <span class=nx>resultDiv</span><span class=p>.</span><span class=nx>textContent</span> <span class=o>=</span> <span class=s2>&#34;You&#39;re wrong!!&#34;</span>
</span></span><span class=line><span class=cl>            <span class=nx>resultDiv</span><span class=p>.</span><span class=nx>className</span> <span class=o>=</span> <span class=s2>&#34;notification is-danger&#34;</span>
</span></span><span class=line><span class=cl>        <span class=p>}</span>
</span></span><span class=line><span class=cl>    <span class=p>})</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=nx>setupHandler</span><span class=p>()</span>
</span></span></code></pre></div><p>The method <code>window.electronAPI.getPassword()</code> ask for the password. It means that our password is located in the window.jsc file, but this file is compiled into <a href=https://fr.wikipedia.org/wiki/V8_(moteur_JavaScript)>v8 bytecode</a>.</p><h2 id=application-patching>Application patching<a hidden class=anchor aria-hidden=true href=#application-patching>#</a></h2><p>I was very lazy to decompile it so I had another idea. If we patch the renderer.js file and compile it again into an other app.asar will this work? I tried. This is our new renderer.js file.</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-js data-lang=js><span class=line><span class=cl><span class=kr>async</span> <span class=kd>function</span> <span class=nx>setupHandler</span><span class=p>()</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=kd>let</span> <span class=nx>truePassword</span> <span class=o>=</span> <span class=kr>await</span> <span class=nb>window</span><span class=p>.</span><span class=nx>electronAPI</span><span class=p>.</span><span class=nx>getPassword</span><span class=p>()</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=nb>document</span><span class=p>.</span><span class=nx>getElementById</span><span class=p>(</span><span class=s2>&#34;passForm&#34;</span><span class=p>).</span><span class=nx>addEventListener</span><span class=p>(</span><span class=s2>&#34;submit&#34;</span><span class=p>,</span> <span class=kr>async</span> <span class=nx>e</span> <span class=p>=&gt;</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=nx>e</span><span class=p>.</span><span class=nx>preventDefault</span><span class=p>()</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>        <span class=kr>const</span> <span class=nx>passwordInput</span> <span class=o>=</span> <span class=nb>document</span><span class=p>.</span><span class=nx>getElementById</span><span class=p>(</span><span class=s2>&#34;password&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        <span class=kr>const</span> <span class=nx>password</span> <span class=o>=</span> <span class=nx>passwordInput</span><span class=p>.</span><span class=nx>value</span>
</span></span><span class=line><span class=cl>        <span class=kr>const</span> <span class=nx>resultDiv</span> <span class=o>=</span> <span class=nb>document</span><span class=p>.</span><span class=nx>getElementById</span><span class=p>(</span><span class=s2>&#34;result&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>        <span class=nx>resultDiv</span><span class=p>.</span><span class=nx>hidden</span> <span class=o>=</span> <span class=kc>false</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>        <span class=nx>resultDiv</span><span class=p>.</span><span class=nx>innerHTML</span> <span class=o>=</span> <span class=sb>`Welcome, dear master!&lt;br/&gt;Flag: </span><span class=si>${</span><span class=kr>await</span> <span class=nb>window</span><span class=p>.</span><span class=nx>electronAPI</span><span class=p>.</span><span class=nx>getFl</span><span class=o>&gt;</span>
</span></span><span class=line><span class=cl>        <span class=nx>resultDiv</span><span class=p>.</span><span class=nx>className</span> <span class=o>=</span> <span class=s2>&#34;notification is-success&#34;</span>
</span></span><span class=line><span class=cl>    <span class=si>}</span><span class=sb>)
</span></span></span><span class=line><span class=cl><span class=sb>}
</span></span></span><span class=line><span class=cl><span class=sb>
</span></span></span><span class=line><span class=cl><span class=sb>setupHandler()
</span></span></span></code></pre></div><p>I just removed the condition.
We compile again our patched application.</p><pre tabindex=0><code>user@debian:~/protonic_vault/protonic-vault/resources$ asar pack app_extracted/ new_app.asar
</code></pre><p>and we replace the old app.asar with our new file.</p><p><img loading=lazy src=/img/posts/Protonic-Vault-WU/replace_app.png alt="replace old app"></p><h2 id=flag>Flag<a hidden class=anchor aria-hidden=true href=#flag>#</a></h2><p>Then we executed again the protonic-vault.exe, click on submit with any password and it works ! we are login and we can get the flag.</p><p><img loading=lazy src=/img/posts/Protonic-Vault-WU/flag_protonic_vault.png alt=flag></p><p>Flag : RM{V8_byt3c0d3_1s_n0t_3n0ugh}</p><h2 id=greetings>Greetings<a hidden class=anchor aria-hidden=true href=#greetings>#</a></h2><p>Thanks to Root-Me and Elf for this challenge. I am very glad about it being interesting at all because it was the first time I reverse engineer this type of application.</p></div><footer class=post-footer><ul class=post-tags><li><a href=https://trikkss.github.io/tags/reverse-engineering/>Reverse Engineering</a></li><li><a href=https://trikkss.github.io/tags/javascript/>Javascript</a></li><li><a href=https://trikkss.github.io/tags/asar/>Asar</a></li></ul><nav class=paginav><a class=prev href=https://trikkss.github.io/posts/hiding_windows_api_calls_part1/><span class=title>« Prev</span><br><span>Malware - Windows API hashing 1</span></a></nav></footer></article></main><footer class=footer><span>&copy; 2025 <a href=https://trikkss.github.io/>TRIKKSS Blog</a></span>
<span>Powered by
<a href=https://gohugo.io/ rel="noopener noreferrer" target=_blank>Hugo</a> &
        <a href=https://github.com/adityatelange/hugo-PaperMod/ rel=noopener target=_blank>PaperMod</a></span></footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g><svg viewBox="0 0 12 6" fill="currentcolor"><path d="M12 6H0l6-6z"/></svg>
</a><script>let menu=document.getElementById("menu");menu&&(menu.scrollLeft=localStorage.getItem("menu-scroll-position"),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)}),document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(e){e.preventDefault();var t=this.getAttribute("href").substr(1);window.matchMedia("(prefers-reduced-motion: reduce)").matches?document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView({behavior:"smooth"}),t==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${t}`)})})</script><script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script><script>document.getElementById("theme-toggle").addEventListener("click",()=>{document.body.className.includes("dark")?(document.body.classList.remove("dark"),localStorage.setItem("pref-theme","light")):(document.body.classList.add("dark"),localStorage.setItem("pref-theme","dark"))})</script><script>document.querySelectorAll("pre > code").forEach(e=>{const n=e.parentNode.parentNode,t=document.createElement("button");t.classList.add("copy-code"),t.innerHTML="copy";function s(){t.innerHTML="copied!",setTimeout(()=>{t.innerHTML="copy"},2e3)}t.addEventListener("click",t=>{if("clipboard"in navigator){navigator.clipboard.writeText(e.textContent),s();return}const n=document.createRange();n.selectNodeContents(e);const o=window.getSelection();o.removeAllRanges(),o.addRange(n);try{document.execCommand("copy"),s()}catch{}o.removeRange(n)}),n.classList.contains("highlight")?n.appendChild(t):n.parentNode.firstChild==n||(e.parentNode.parentNode.parentNode.parentNode.parentNode.nodeName=="TABLE"?e.parentNode.parentNode.parentNode.parentNode.parentNode.appendChild(t):e.parentNode.appendChild(t))})</script></body></html>